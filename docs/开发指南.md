# å¼€å‘æŒ‡å—

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¼€å‘ç¯å¢ƒ](#å¼€å‘ç¯å¢ƒ)
- [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
- [APIå¼€å‘](#apiå¼€å‘)
- [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
- [å‰ç«¯å¼€å‘](#å‰ç«¯å¼€å‘)
- [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## é¡¹ç›®ç»“æ„

```
graduationPro-VueNode/
â”œâ”€â”€ frontend/                 # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/             # APIæ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ assets/          # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ components/      # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ directives/      # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ hooks/           # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ layouts/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ mock/            # Mockæ•°æ®
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ store/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ types/           # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.vue          # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ public/              # å…¬å…±èµ„æº
â”‚   â”œâ”€â”€ .env.development     # å¼€å‘ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ .env.production      # ç”Ÿäº§ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ index.html           # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ package.json         # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json        # TypeScripté…ç½®
â”‚   â””â”€â”€ vite.config.ts       # Viteé…ç½®
â”‚
â”œâ”€â”€ backend/                 # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ database.js # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ mockDatabase.js # Mockæ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ controllers/    # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboardController.js
â”‚   â”‚   â”‚   â””â”€â”€ stationController.js
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js     # JWTè®¤è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ errorHandler.js
â”‚   â”‚   â”‚   â””â”€â”€ validator.js
â”‚   â”‚   â”œâ”€â”€ routes/         # è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard.js
â”‚   â”‚   â”‚   â””â”€â”€ station.js
â”‚   â”‚   â””â”€â”€ app.js          # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ scripts/            # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ .env                # ç¯å¢ƒå˜é‡
â”‚   â””â”€â”€ package.json        # ä¾èµ–é…ç½®
â”‚
â”œâ”€â”€ database/               # æ•°æ®åº“è„šæœ¬
â”‚   â””â”€â”€ schema.sql          # æ•°æ®åº“ç»“æ„
â”‚
â”œâ”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ å¿«é€Ÿå¯åŠ¨æŒ‡å—.md
â”‚   â”œâ”€â”€ å¼€å‘æŒ‡å—.md
â”‚   â”œâ”€â”€ è¥æ”¶ç»Ÿè®¡æ¨¡å—.md
â”‚   â””â”€â”€ æ›´æ–°æ—¥å¿—.md
â”‚
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ é¡¹ç›®è¿›åº¦è¯´æ˜.md         # é¡¹ç›®è¿›åº¦
â””â”€â”€ é»˜è®¤è´¦å·.txt            # é»˜è®¤è´¦å·
```

---

## å¼€å‘ç¯å¢ƒ

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- MySQL >= 8.0
- npm >= 8.0.0
- Git

### å®‰è£…ä¾èµ–

```bash
# å‰ç«¯ä¾èµ–
cd frontend
npm install

# åç«¯ä¾èµ–
cd backend
npm install
```

### ç¯å¢ƒé…ç½®

#### åç«¯ç¯å¢ƒå˜é‡ (backend/.env)

```env
# æœåŠ¡å™¨é…ç½®
PORT=5501

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=charging_station

# JWTé…ç½®
JWT_SECRET=your_secret_key_here

# CORSé…ç½®
CORS_ORIGIN=http://localhost:5173
```

#### å‰ç«¯ç¯å¢ƒå˜é‡ (frontend/.env.development)

```env
# APIåœ°å€
VITE_API_URL=http://localhost:5501
```

---

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ

#### JavaScript/TypeScript

- ä½¿ç”¨ES6+è¯­æ³•
- ä½¿ç”¨2ç©ºæ ¼ç¼©è¿›
- ä½¿ç”¨å•å¼•å·
- ä½¿ç”¨åˆ†å·ç»“å°¾
- ä½¿ç”¨é©¼å³°å‘½åæ³•

#### Vueç»„ä»¶

- ç»„ä»¶åä½¿ç”¨PascalCase
- Propsä½¿ç”¨camelCase
- äº‹ä»¶åä½¿ç”¨kebab-case
- ä½¿ç”¨ç»„åˆå¼APIï¼ˆComposition APIï¼‰

### å‘½åè§„èŒƒ

#### æ–‡ä»¶å‘½å

- ç»„ä»¶æ–‡ä»¶ï¼šPascalCaseï¼ˆå¦‚ï¼š`UserList.vue`ï¼‰
- å·¥å…·æ–‡ä»¶ï¼šcamelCaseï¼ˆå¦‚ï¼š`formatDate.ts`ï¼‰
- è·¯ç”±æ–‡ä»¶ï¼škebab-caseï¼ˆå¦‚ï¼š`user-management.js`ï¼‰

#### å˜é‡å‘½å

- å¸¸é‡ï¼šUPPER_SNAKE_CASEï¼ˆå¦‚ï¼š`API_BASE_URL`ï¼‰
- å˜é‡ï¼šcamelCaseï¼ˆå¦‚ï¼š`userName`ï¼‰
- ç±»åï¼šPascalCaseï¼ˆå¦‚ï¼š`UserService`ï¼‰

### Gitæäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

**ç¤ºä¾‹**:

```bash
git commit -m "feat: æ·»åŠ è¥æ”¶ç»Ÿè®¡æ¨¡å—"
git commit -m "fix: ä¿®å¤å•æ—¥æ€»æ”¶å…¥æ˜¾ç¤ºå¼‚å¸¸"
git commit -m "docs: æ›´æ–°READMEæ–‡æ¡£"
```

---

## APIå¼€å‘

### APIè§„èŒƒ

#### æ¥å£è·¯å¾„

- ç»Ÿä¸€å‰ç¼€ï¼š`/api`
- è®¤è¯æ¥å£ï¼š`/api/auth/*`
- ä¸šåŠ¡æ¥å£ï¼š`/api/{module}/*`

#### è¯·æ±‚æ–¹æ³•

- GETï¼šæŸ¥è¯¢æ•°æ®
- POSTï¼šåˆ›å»º/æäº¤æ•°æ®
- PUTï¼šæ›´æ–°æ•°æ®
- DELETEï¼šåˆ é™¤æ•°æ®

#### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "success": true,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {}
}
```

#### çŠ¶æ€ç 

- 200ï¼šæˆåŠŸ
- 400ï¼šè¯·æ±‚å‚æ•°é”™è¯¯
- 401ï¼šæœªæˆæƒ
- 403ï¼šæ— æƒé™
- 404ï¼šèµ„æºä¸å­˜åœ¨
- 500ï¼šæœåŠ¡å™¨é”™è¯¯

### å¼€å‘æµç¨‹

#### 1. åˆ›å»ºæ§åˆ¶å™¨

åœ¨ `backend/src/controllers/` åˆ›å»ºæ§åˆ¶å™¨æ–‡ä»¶ï¼š

```javascript
// exampleController.js
import pool from "../config/database.js";

export const getList = async (req, res) => {
  try {
    const { page = 1, pageSize = 10 } = req.body;

    // æŸ¥è¯¢æ•°æ®
    const [rows] = await pool.query(
      "SELECT * FROM table_name LIMIT ? OFFSET ?",
      [pageSize, (page - 1) * pageSize],
    );

    res.json({
      code: 200,
      success: true,
      data: {
        list: rows,
        total: rows.length,
      },
    });
  } catch (error) {
    console.error("æŸ¥è¯¢å¤±è´¥:", error);
    res.status(500).json({
      code: 500,
      success: false,
      message: "æœåŠ¡å™¨é”™è¯¯",
    });
  }
};
```

#### 2. åˆ›å»ºè·¯ç”±

åœ¨ `backend/src/routes/` åˆ›å»ºè·¯ç”±æ–‡ä»¶ï¼š

```javascript
// example.js
import express from "express";
import { getList } from "../controllers/exampleController.js";
import { authenticateToken } from "../middleware/auth.js";

const router = express.Router();

// éœ€è¦è®¤è¯çš„è·¯ç”±
router.use(authenticateToken);

router.post("/list", getList);

export default router;
```

#### 3. æ³¨å†Œè·¯ç”±

åœ¨ `backend/src/app.js` ä¸­æ³¨å†Œè·¯ç”±ï¼š

```javascript
import exampleRoutes from "./routes/example.js";

app.use("/api/example", exampleRoutes);
```

#### 4. å‰ç«¯APIè°ƒç”¨

åœ¨ `frontend/src/api/` åˆ›å»ºAPIæ–‡ä»¶ï¼š

```typescript
// example.ts
import { post } from "@/utils/http";

const Api = {
  List: "/api/example/list",
};

export function getListApi(data: any) {
  return post(Api.List, data);
}
```

---

## æ•°æ®åº“è®¾è®¡

### è¡¨è®¾è®¡è§„èŒƒ

#### å‘½åè§„èŒƒ

- è¡¨åï¼šå°å†™+ä¸‹åˆ’çº¿ï¼ˆå¦‚ï¼š`station_monitor`ï¼‰
- å­—æ®µåï¼šå°å†™+ä¸‹åˆ’çº¿ï¼ˆå¦‚ï¼š`station_name`ï¼‰
- ä¸»é”®ï¼š`id`
- å¤–é”®ï¼š`{table}_id`

#### å¿…å¤‡å­—æ®µ

```sql
id INT PRIMARY KEY AUTO_INCREMENT,
created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
```

#### ç´¢å¼•è§„èŒƒ

- ä¸»é”®ç´¢å¼•ï¼šè‡ªåŠ¨åˆ›å»º
- å”¯ä¸€ç´¢å¼•ï¼šå”¯ä¸€å­—æ®µ
- æ™®é€šç´¢å¼•ï¼šæŸ¥è¯¢é¢‘ç¹çš„å­—æ®µ
- å¤–é”®ç´¢å¼•ï¼šå…³è”å­—æ®µ

### åˆ›å»ºè¡¨ç¤ºä¾‹

```sql
CREATE TABLE IF NOT EXISTS example_table (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL COMMENT 'åç§°',
  status TINYINT NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  INDEX idx_name (name),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç¤ºä¾‹è¡¨';
```

---

## å‰ç«¯å¼€å‘

### ç»„ä»¶å¼€å‘

#### é¡µé¢ç»„ä»¶ç»“æ„

```vue
<template>
  <div>
    <!-- é¡µé¢å†…å®¹ -->
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from "vue";

// å“åº”å¼æ•°æ®
const data = ref([]);

// æ–¹æ³•
const loadData = async () => {
  // åŠ è½½æ•°æ®
};

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  loadData();
});
</script>

<style lang="less" scoped>
/* æ ·å¼ */
</style>
```

### çŠ¶æ€ç®¡ç†

ä½¿ç”¨Piniaè¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼š

```typescript
// store/example.ts
import { defineStore } from "pinia";

export const useExampleStore = defineStore("example", {
  state: () => ({
    data: [],
  }),

  getters: {
    getData: (state) => state.data,
  },

  actions: {
    setData(data: any[]) {
      this.data = data;
    },
  },
});
```

### è·¯ç”±é…ç½®

```typescript
// router/index.ts
{
  path: "/example",
  name: "Example",
  component: () => import("@/views/example/Example.vue"),
  meta: {
    title: "ç¤ºä¾‹é¡µé¢",
    requiresAuth: true
  }
}
```

---

## è°ƒè¯•æŠ€å·§

### åç«¯è°ƒè¯•

#### 1. ä½¿ç”¨console.log

```javascript
console.log("è¯·æ±‚å‚æ•°:", req.body);
console.log("æŸ¥è¯¢ç»“æœ:", rows);
```

#### 2. ä½¿ç”¨nodemonè‡ªåŠ¨é‡å¯

```bash
npm run dev
```

#### 3. æŸ¥çœ‹æ•°æ®åº“æŸ¥è¯¢

```javascript
console.log("SQL:", query);
console.log("å‚æ•°:", params);
```

### å‰ç«¯è°ƒè¯•

#### 1. ä½¿ç”¨Vue DevTools

å®‰è£…Vue DevToolsæµè§ˆå™¨æ‰©å±•

#### 2. ä½¿ç”¨console.log

```typescript
console.log("APIå“åº”:", response);
console.log("çŠ¶æ€æ•°æ®:", data.value);
```

#### 3. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·

- Networkï¼šæŸ¥çœ‹APIè¯·æ±‚
- Consoleï¼šæŸ¥çœ‹æ—¥å¿—
- Vueï¼šæŸ¥çœ‹ç»„ä»¶çŠ¶æ€

---

## å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

**é—®é¢˜**: `Error: connect ECONNREFUSED`

**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦è¿è¡Œ
- ç¡®è®¤ `.env` é…ç½®æ­£ç¡®
- æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨

### 2. ç«¯å£è¢«å ç”¨

**é—®é¢˜**: `Error: listen EADDRINUSE: address already in use`

**è§£å†³æ–¹æ¡ˆ**:

```bash
# Windows
netstat -ano | findstr :5501
taskkill /F /PID <è¿›ç¨‹ID>

# Linux/Mac
lsof -i :5501
kill -9 <è¿›ç¨‹ID>
```

### 3. CORSè·¨åŸŸé—®é¢˜

**é—®é¢˜**: `Access-Control-Allow-Origin`

**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥åç«¯CORSé…ç½®
- ç¡®è®¤ `CORS_ORIGIN` ç¯å¢ƒå˜é‡æ­£ç¡®

### 4. JWTè®¤è¯å¤±è´¥

**é—®é¢˜**: `401 Unauthorized`

**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥tokenæ˜¯å¦è¿‡æœŸ
- ç¡®è®¤è¯·æ±‚å¤´åŒ…å«Authorization
- é‡æ–°ç™»å½•è·å–æ–°token

### 5. å‰ç«¯æ‰“åŒ…å¤±è´¥

**é—®é¢˜**: `Build failed`

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ¸…é™¤ç¼“å­˜
rm -rf node_modules
rm package-lock.json
npm install

# é‡æ–°æ‰“åŒ…
npm run build
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

### å®˜æ–¹æ–‡æ¡£

- [Vue 3](https://cn.vuejs.org/)
- [TypeScript](https://www.typescriptlang.org/)
- [Element Plus](https://element-plus.org/)
- [Express](https://expressjs.com/)
- [MySQL](https://dev.mysql.com/doc/)

### æ¨èå·¥å…·

- [VS Code](https://code.visualstudio.com/) - ä»£ç ç¼–è¾‘å™¨
- [Postman](https://www.postman.com/) - APIæµ‹è¯•
- [Navicat](https://www.navicat.com/) - æ•°æ®åº“ç®¡ç†
- [Git](https://git-scm.com/) - ç‰ˆæœ¬æ§åˆ¶

---

**æœ€åæ›´æ–°**: 2026-02-02
